<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secure Payment | AVX</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<!-- FONT AWESOME -->
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{
  background:#0b0b0b;
  color:#fff;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card{
  width:420px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(18px);
  padding:35px;
  border-radius:26px;
  box-shadow:0 0 40px rgba(0,255,240,.6);
}

h2{text-align:center;color:#00fff0;}
.plan{text-align:center;color:#aaa;margin-top:5px;}
.amount{text-align:center;font-size:2.4rem;color:#00ff88;margin:18px 0;}

.upi{
  display:flex;
  justify-content:center;
  gap:18px;
  margin:20px 0;
}
.upi i{
  font-size:34px;
  background:#fff;
  color:#000;
  padding:12px;
  border-radius:14px;
}

.neon-btn{
  width:100%;
  padding:15px;
  border-radius:40px;
  border:none;
  cursor:pointer;
  font-weight:700;
  background:linear-gradient(90deg,#00ff88,#00cc44);
  box-shadow:0 0 30px rgba(0,255,136,.9);
}
.neon-btn:hover{transform:scale(1.05);}

.note{text-align:center;font-size:13px;color:#aaa;margin-top:12px;}
</style>
</head>

<body>

<div class="card">
  <h2>Complete Payment</h2>
  <p class="plan" id="plan"></p>
  <div class="amount">â‚¹<span id="amount"></span></div>

  <!-- UPI ICONS -->
  <div class="upi">
    <i class="fa-brands fa-google-pay"></i>
    <i class="fa-solid fa-mobile-screen"></i>
    <i class="fa-solid fa-qrcode"></i>
    <i class="fa-solid fa-building-columns"></i>
  </div>

  <button class="neon-btn" onclick="pay()">Pay Securely</button>

  <div class="note">
    ðŸ”’ UPI / Card / NetBanking via Razorpay
  </div>
</div>

<script>
const p = new URLSearchParams(window.location.search);
const plan = p.get("plan");
const amount = p.get("amount");
const name = p.get("name");
const email = p.get("email");

document.getElementById("plan").innerText = plan;
document.getElementById("amount").innerText = amount;

async function pay(){
  const res = await fetch("/create-order",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({amount})
  });
  const order = await res.json();

  new Razorpay({
    key:"rzp_live_S4F1oww60ZXW1O",
    amount:order.amount,
    currency:"INR",
    order_id:order.id,
    name:"AVX Web Services",
    description:plan,
    handler:function(r){
      fetch("/contact",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
          plan, amount, name, email,
          message:"Advance Payment",
          orderId:r.razorpay_order_id
        })
      }).then(()=>{
        location.href="success.html?orderId="+r.razorpay_order_id;
      });
    }
  }).open();
}
</script>

</body>
</html>
